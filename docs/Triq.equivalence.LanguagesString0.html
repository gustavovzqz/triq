<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Triq.equivalence.LanguagesString0</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Triq.equivalence.LanguagesString0</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab1"></a><h1 class="section">Prova de Equivalência do programa dos naturais para o programa de alfabeto com apenas um dígito</h1>

<div class="paragraph"> </div>

 O objetivo deste arquivo é provar a equivalência entre o programa dos naturais
    para o programa de strings, no caso especial em que este possui apenas um
    símbolo. Veremos que, apesar de parecer muito simples, já que existe uma
    associação direta das instruções nos naturais para as em strings, diversos
    detalhes de implementação dificultam o progresso da prova. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Triq</span> <span class="id" title="keyword">Require</span> <a class="idref" href="Triq.nat_lang.NatLang.html#"><span class="id" title="library">NatLang</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Triq</span> <span class="id" title="keyword">Require</span> <a class="idref" href="Triq.nat_lang.NatLangProperties.html#"><span class="id" title="library">NatLangProperties</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Triq</span> <span class="id" title="keyword">Require</span> <a class="idref" href="Triq.string_lang.StringLang.html#"><span class="id" title="library">StringLang</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Triq</span> <span class="id" title="keyword">Require</span> <a class="idref" href="Triq.string_lang.StringLangProperties.html#"><span class="id" title="library">StringLangProperties</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Triq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Triq.common.LanguagesCommon.html#"><span class="id" title="library">LanguagesCommon</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Triq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Triq.equivalence.LanguagesUtils.html#"><span class="id" title="library">LanguagesUtils</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Nat</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">List</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="library">Extraction</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Lia</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">ListNotations</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab2"></a><h1 class="section">Definições Básicas para a Equivalência</h1>

<div class="paragraph"> </div>

 Para não lidar com a complexidade do caso genérico, as definições foram adaptadas
    para contemplar as especificidades do caso de string 0. As macros possuem apenas
    uma instrução e as definições de equivalência podem ser simplificadas 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="zero_prf" class="idref" href="#zero_prf"><span class="id" title="definition">zero_prf</span></a> : <a class="idref" href="Triq.string_lang.StringLang.html#alphabet"><span class="id" title="definition">StringLang.alphabet</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">∃</span> 0. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">PeanoNat.Nat.le_0_l</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="incr_string0" class="idref" href="#incr_string0"><span class="id" title="definition">incr_string0</span></a> (<a id="s:1" class="idref" href="#s:1"><span class="id" title="binder">s</span></a> : <a class="idref" href="Triq.string_lang.StringLang.html#string"><span class="id" title="definition">StringLang.string</span></a> 0) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Triq.equivalence.LanguagesString0.html#zero_prf"><span class="id" title="definition">zero_prf</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#s:1"><span class="id" title="variable">s</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="get_incr_macro_0" class="idref" href="#get_incr_macro_0"><span class="id" title="definition">get_incr_macro_0</span></a> <a id="opt_lbl:2" class="idref" href="#opt_lbl:2"><span class="id" title="binder">opt_lbl</span></a> <a id="x:3" class="idref" href="#x:3"><span class="id" title="binder">x</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Triq.string_lang.StringLang.html#Instr"><span class="id" title="constructor">StringLang.Instr</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#opt_lbl:2"><span class="id" title="variable">opt_lbl</span></a> (<a class="idref" href="Triq.string_lang.StringLang.html#APPEND"><span class="id" title="constructor">StringLang.APPEND</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#zero_prf"><span class="id" title="definition">zero_prf</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#x:3"><span class="id" title="variable">x</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="get_decr_macro_0" class="idref" href="#get_decr_macro_0"><span class="id" title="definition">get_decr_macro_0</span></a> <a id="opt_lbl:4" class="idref" href="#opt_lbl:4"><span class="id" title="binder">opt_lbl</span></a> <a id="x:5" class="idref" href="#x:5"><span class="id" title="binder">x</span></a> : (<a class="idref" href="Triq.string_lang.StringLang.html#instruction"><span class="id" title="inductive">StringLang.instruction</span></a> 0) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Triq.string_lang.StringLang.html#Instr"><span class="id" title="constructor">StringLang.Instr</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#opt_lbl:4"><span class="id" title="variable">opt_lbl</span></a> (<a class="idref" href="Triq.string_lang.StringLang.html#DEL"><span class="id" title="constructor">StringLang.DEL</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#x:5"><span class="id" title="variable">x</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="get_if_macro_0" class="idref" href="#get_if_macro_0"><span class="id" title="definition">get_if_macro_0</span></a> <a id="opt_lbl:6" class="idref" href="#opt_lbl:6"><span class="id" title="binder">opt_lbl</span></a> <a id="x:7" class="idref" href="#x:7"><span class="id" title="binder">x</span></a> <a id="l:8" class="idref" href="#l:8"><span class="id" title="binder">l</span></a> :=<br/>
<a class="idref" href="Triq.string_lang.StringLang.html#Instr"><span class="id" title="constructor">StringLang.Instr</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#opt_lbl:6"><span class="id" title="variable">opt_lbl</span></a> (<a class="idref" href="Triq.string_lang.StringLang.html#IF_ENDS_GOTO"><span class="id" title="constructor">StringLang.IF_ENDS_GOTO</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#x:7"><span class="id" title="variable">x</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#zero_prf"><span class="id" title="definition">zero_prf</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#l:8"><span class="id" title="variable">l</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="get_str_macro0" class="idref" href="#get_str_macro0"><span class="id" title="definition">get_str_macro0</span></a> (<a id="i_nat:9" class="idref" href="#i_nat:9"><span class="id" title="binder">i_nat</span></a> : <a class="idref" href="Triq.nat_lang.NatLang.html#instruction"><span class="id" title="inductive">NatLang.instruction</span></a>) :<br/>
&nbsp;&nbsp;(<a class="idref" href="Triq.string_lang.StringLang.html#instruction"><span class="id" title="inductive">StringLang.instruction</span></a> 0 ) := <br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#i_nat:9"><span class="id" title="variable">i_nat</span></a> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;| <a class="idref" href="Triq.nat_lang.NatLang.html#Instr"><span class="id" title="constructor">NatLang.Instr</span></a> <span class="id" title="var">opt_lbl</span> (<a class="idref" href="Triq.nat_lang.NatLang.html#INCR"><span class="id" title="constructor">NatLang.INCR</span></a> <span class="id" title="var">x</span>) ⇒ <a class="idref" href="Triq.equivalence.LanguagesString0.html#get_incr_macro_0"><span class="id" title="definition">get_incr_macro_0</span></a> <span class="id" title="var">opt_lbl</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Triq.nat_lang.NatLang.html#Instr"><span class="id" title="constructor">NatLang.Instr</span></a> <span class="id" title="var">opt_lbl</span> (<a class="idref" href="Triq.nat_lang.NatLang.html#DECR"><span class="id" title="constructor">NatLang.DECR</span></a> <span class="id" title="var">x</span>) ⇒  <a class="idref" href="Triq.equivalence.LanguagesString0.html#get_decr_macro_0"><span class="id" title="definition">get_decr_macro_0</span></a> <span class="id" title="var">opt_lbl</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Triq.nat_lang.NatLang.html#Instr"><span class="id" title="constructor">NatLang.Instr</span></a> <span class="id" title="var">opt_lbl</span> (<a class="idref" href="Triq.nat_lang.NatLang.html#IF_GOTO"><span class="id" title="constructor">NatLang.IF_GOTO</span></a> <span class="id" title="var">x</span> <span class="id" title="var">l</span>) ⇒ <a class="idref" href="Triq.equivalence.LanguagesString0.html#get_if_macro_0"><span class="id" title="definition">get_if_macro_0</span></a> <span class="id" title="var">opt_lbl</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="get_str_prg" class="idref" href="#get_str_prg"><span class="id" title="definition">get_str_prg</span></a> (<a id="nat_prg:11" class="idref" href="#nat_prg:11"><span class="id" title="binder">nat_prg</span></a> : <a class="idref" href="Triq.nat_lang.NatLang.html#program"><span class="id" title="definition">NatLang.program</span></a>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Triq.string_lang.StringLang.html#program"><span class="id" title="definition">StringLang.program</span></a> 0 :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#nat_prg:11"><span class="id" title="variable">nat_prg</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="notation">[]</span> ⇒ <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">i_nat</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">rest</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Triq.equivalence.LanguagesString0.html#get_str_macro0"><span class="id" title="definition">get_str_macro0</span></a> <span class="id" title="var">i_nat</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Triq.equivalence.LanguagesString0.html#get_str_prg:12"><span class="id" title="definition">get_str_prg</span></a> <span class="id" title="var">rest</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab3"></a><h1 class="section">Noções Principais de Equivalência</h1>

<div class="paragraph"> </div>

 A ideia da prova consiste em acompanhar cada passo de cada programa. Como o passo
    em p_nat sempre acompanha o passo em p_str, as instruções e as macros sempre estarão
    lado a lado. A ideia de equivalência em posição é <i>suficiente</i> para obter a instrução
    equivalente em p_str. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="equiv_pos" class="idref" href="#equiv_pos"><span class="id" title="definition">equiv_pos</span></a> <br/>
&nbsp;&nbsp;(<a id="p_nat:14" class="idref" href="#p_nat:14"><span class="id" title="binder">p_nat</span></a> : <a class="idref" href="Triq.nat_lang.NatLang.html#program"><span class="id" title="definition">NatLang.program</span></a>)<br/>
&nbsp;&nbsp;(<a id="n:15" class="idref" href="#n:15"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;(<a id="p_str:16" class="idref" href="#p_str:16"><span class="id" title="binder">p_str</span></a> : <a class="idref" href="Triq.string_lang.StringLang.html#program"><span class="id" title="definition">StringLang.program</span></a> 0)<br/>
&nbsp;&nbsp;(<a id="n':17" class="idref" href="#n':17"><span class="id" title="binder">n'</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Triq.equivalence.LanguagesString0.html#n:15"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#n':17"><span class="id" title="variable">n'</span></a>.<br/>

<br/>
</div>

<div class="doc">
Para obter o programa simulado, basta executar a função de obter a macro equivalente
    para cada instrução em p_nat. Observe que as labels são as mesmas dos dois lados. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="get_simulated_program" class="idref" href="#get_simulated_program"><span class="id" title="definition">get_simulated_program</span></a> <a id="p_nat:18" class="idref" href="#p_nat:18"><span class="id" title="binder">p_nat</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#p_nat:18"><span class="id" title="variable">p_nat</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">h</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">t</span> ⇒ <span class="id" title="notation">[</span><a class="idref" href="Triq.equivalence.LanguagesString0.html#get_str_macro0"><span class="id" title="definition">get_str_macro0</span></a> <span class="id" title="var">h</span><span class="id" title="notation">]</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#get_simulated_program:19"><span class="id" title="definition">get_simulated_program</span></a> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <span class="id" title="notation">[]</span> ⇒ <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
A conversão pode ser simplificada já que incrementar no programa de string0 
    é o mesmo que adicionar um elemento ao final. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="nat_to_string0" class="idref" href="#nat_to_string0"><span class="id" title="definition">nat_to_string0</span></a> <a id="n:21" class="idref" href="#n:21"><span class="id" title="binder">n</span></a> := <br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#n:21"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| 0 ⇒ <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n'</span> ⇒ <a class="idref" href="Triq.equivalence.LanguagesString0.html#incr_string0"><span class="id" title="definition">incr_string0</span></a> (<a class="idref" href="Triq.equivalence.LanguagesString0.html#nat_to_string0:22"><span class="id" title="definition">nat_to_string0</span></a> <span class="id" title="var">n'</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
A propriedade que queremos mostrar que se mantém para cada passo de computação são as
    seguintes:
<ul class="doclist">
<li> Os estados são equivalentes;

</li>
<li> As posições são equivalentes.

</li>
</ul>

<div class="paragraph"> </div>

   De tal forma que, para qualquer passo de computação em p_nat, o mesmo passo em p_str
   resultará em uma posição equivalente (exatamente a mesma linha) e em um estado 
   equivalente ao dos naturais 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="state_equiv" class="idref" href="#state_equiv"><span class="id" title="definition">state_equiv</span></a> (<a id="s_nat:24" class="idref" href="#s_nat:24"><span class="id" title="binder">s_nat</span></a> : <a class="idref" href="Triq.nat_lang.NatLang.html#state"><span class="id" title="definition">NatLang.state</span></a>) (<a id="s_str:25" class="idref" href="#s_str:25"><span class="id" title="binder">s_str</span></a> : <a class="idref" href="Triq.string_lang.StringLang.html#state"><span class="id" title="definition">StringLang.state</span></a> 0) :=<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="x:26" class="idref" href="#x:26"><span class="id" title="binder">x</span></a> : <a class="idref" href="Triq.common.LanguagesCommon.html#variable"><span class="id" title="inductive">variable</span></a>) (<a id="v:27" class="idref" href="#v:27"><span class="id" title="binder">v</span></a> : <a class="idref" href="Triq.string_lang.StringLang.html#string"><span class="id" title="definition">StringLang.string</span></a> 0),<br/>
&nbsp;&nbsp;<a class="idref" href="Triq.equivalence.LanguagesString0.html#nat_to_string0"><span class="id" title="definition">nat_to_string0</span></a> (<a class="idref" href="Triq.equivalence.LanguagesString0.html#s_nat:24"><span class="id" title="variable">s_nat</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#x:26"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#v:27"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#s_str:25"><span class="id" title="variable">s_str</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#x:26"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#v:27"><span class="id" title="variable">v</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="prog_equiv" class="idref" href="#prog_equiv"><span class="id" title="definition">prog_equiv</span></a><br/>
&nbsp;&nbsp;(<a id="p_nat:28" class="idref" href="#p_nat:28"><span class="id" title="binder">p_nat</span></a>    : <a class="idref" href="Triq.nat_lang.NatLang.html#program"><span class="id" title="definition">NatLang.program</span></a>)<br/>
&nbsp;&nbsp;(<a id="snap_nat:29" class="idref" href="#snap_nat:29"><span class="id" title="binder">snap_nat</span></a> : <a class="idref" href="Triq.nat_lang.NatLang.html#snapshot"><span class="id" title="inductive">NatLang.snapshot</span></a>)<br/>
&nbsp;&nbsp;(<a id="p_str:30" class="idref" href="#p_str:30"><span class="id" title="binder">p_str</span></a>    : <a class="idref" href="Triq.string_lang.StringLang.html#program"><span class="id" title="definition">StringLang.program</span></a> 0) <br/>
&nbsp;&nbsp;(<a id="snap_str:31" class="idref" href="#snap_str:31"><span class="id" title="binder">snap_str</span></a> : <a class="idref" href="Triq.string_lang.StringLang.html#snapshot"><span class="id" title="inductive">StringLang.snapshot</span></a> 0) :=<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#snap_nat:29"><span class="id" title="variable">snap_nat</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Triq.nat_lang.NatLang.html#SNAP"><span class="id" title="constructor">NatLang.SNAP</span></a> <span class="id" title="var">n</span> <span class="id" title="var">state_nat</span> ⇒ (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#snap_str:31"><span class="id" title="variable">snap_str</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Triq.string_lang.StringLang.html#SNAP"><span class="id" title="constructor">StringLang.SNAP</span></a> <span class="id" title="var">n'</span> <span class="id" title="var">state_str</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Triq.equivalence.LanguagesString0.html#state_equiv"><span class="id" title="definition">state_equiv</span></a> <span class="id" title="var">state_nat</span> <span class="id" title="var">state_str</span>  <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#equiv_pos"><span class="id" title="definition">equiv_pos</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#p_nat:28"><span class="id" title="variable">p_nat</span></a> <span class="id" title="var">n</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#p_str:30"><span class="id" title="variable">p_str</span></a> <span class="id" title="var">n'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Para obter o estado equivalente, basta acoplar uma função de conversão ao resultado
    do estado original 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="get_equiv_state" class="idref" href="#get_equiv_state"><span class="id" title="definition">get_equiv_state</span></a> <a id="nat_state:34" class="idref" href="#nat_state:34"><span class="id" title="binder">nat_state</span></a> : (<a class="idref" href="Triq.string_lang.StringLang.html#state"><span class="id" title="definition">StringLang.state</span></a> 0) :=<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="x:35" class="idref" href="#x:35"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="Triq.equivalence.LanguagesString0.html#nat_to_string0"><span class="id" title="definition">nat_to_string0</span></a> (<a class="idref" href="Triq.equivalence.LanguagesString0.html#nat_state:34"><span class="id" title="variable">nat_state</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#x:35"><span class="id" title="variable">x</span></a>)).<br/>

<br/>
</div>

<div class="doc">
É fácil mostrar que o resultado da função acima é, de fato, um estado equivalente
    pela definição anterior 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="get_equiv_state_correct" class="idref" href="#get_equiv_state_correct"><span class="id" title="lemma">get_equiv_state_correct</span></a> : <span class="id" title="keyword">∀</span> <a id="state_nat:36" class="idref" href="#state_nat:36"><span class="id" title="binder">state_nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Triq.equivalence.LanguagesString0.html#state_equiv"><span class="id" title="definition">state_equiv</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#state_nat:36"><span class="id" title="variable">state_nat</span></a> (<a class="idref" href="Triq.equivalence.LanguagesString0.html#get_equiv_state"><span class="id" title="definition">get_equiv_state</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#state_nat:36"><span class="id" title="variable">state_nat</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">state_nat</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#get_equiv_state"><span class="id" title="definition">get_equiv_state</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#state_equiv"><span class="id" title="definition">state_equiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">state_x_eq_v</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">state_nat</span> <span class="id" title="var">x</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">state_x_eq_v</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">state_x_eq_v</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Em algum momento da prova, obteremos a k-ésima instrução em p_nat. Fato é que a 
    k-ésima instrução de p_str será a macro da instrução em p_nat. Pela estrutura do
    programa, dado que estamos consultando a mesma posição, a instrução em p_str
    é, obrigatoriamente, a macro da instrução em p_nat. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nat_nth_implies_string" class="idref" href="#nat_nth_implies_string"><span class="id" title="lemma">nat_nth_implies_string</span></a> : <span class="id" title="keyword">∀</span> <a id="p_nat:37" class="idref" href="#p_nat:37"><span class="id" title="binder">p_nat</span></a> <a id="n:38" class="idref" href="#n:38"><span class="id" title="binder">n</span></a> <a id="i:39" class="idref" href="#i:39"><span class="id" title="binder">i</span></a>, <br/>
&nbsp;&nbsp;<span class="id" title="definition">nth_error</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#p_nat:37"><span class="id" title="variable">p_nat</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#n:38"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#i:39"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">nth_error</span> (<a class="idref" href="Triq.equivalence.LanguagesString0.html#get_simulated_program"><span class="id" title="definition">get_simulated_program</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#p_nat:37"><span class="id" title="variable">p_nat</span></a>) <a class="idref" href="Triq.equivalence.LanguagesString0.html#n:38"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="Triq.equivalence.LanguagesString0.html#get_str_macro0"><span class="id" title="definition">get_str_macro0</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#i:39"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p_nat</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">t</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">i</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">nth_error_nil</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nat_nth_implies_string_none" class="idref" href="#nat_nth_implies_string_none"><span class="id" title="lemma">nat_nth_implies_string_none</span></a> : <span class="id" title="keyword">∀</span> <a id="p_nat:40" class="idref" href="#p_nat:40"><span class="id" title="binder">p_nat</span></a> <a id="n:41" class="idref" href="#n:41"><span class="id" title="binder">n</span></a>,<br/>
&nbsp;&nbsp;<span class="id" title="definition">nth_error</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#p_nat:40"><span class="id" title="variable">p_nat</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#n:41"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">nth_error</span> (<a class="idref" href="Triq.equivalence.LanguagesString0.html#get_simulated_program"><span class="id" title="definition">get_simulated_program</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#p_nat:40"><span class="id" title="variable">p_nat</span></a>) <a class="idref" href="Triq.equivalence.LanguagesString0.html#n:41"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p_nat</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">t</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">nth_error_nil</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eq_inst_label_nat_str" class="idref" href="#eq_inst_label_nat_str"><span class="id" title="lemma">eq_inst_label_nat_str</span></a> : <span class="id" title="keyword">∀</span> <a id="h:42" class="idref" href="#h:42"><span class="id" title="binder">h</span></a> <a id="l:43" class="idref" href="#l:43"><span class="id" title="binder">l</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Triq.nat_lang.NatLang.html#eq_inst_label"><span class="id" title="definition">NatLang.eq_inst_label</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#h:42"><span class="id" title="variable">h</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#l:43"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Triq.string_lang.StringLang.html#eq_inst_label"><span class="id" title="definition">StringLang.eq_inst_label</span></a> (<a class="idref" href="Triq.equivalence.LanguagesString0.html#get_str_macro0"><span class="id" title="definition">get_str_macro0</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#h:42"><span class="id" title="variable">h</span></a>) <a class="idref" href="Triq.equivalence.LanguagesString0.html#l:43"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="label_equal_nat_str" class="idref" href="#label_equal_nat_str"><span class="id" title="lemma">label_equal_nat_str</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="p_nat:44" class="idref" href="#p_nat:44"><span class="id" title="binder">p_nat</span></a> <a id="p_str:45" class="idref" href="#p_str:45"><span class="id" title="binder">p_str</span></a> <a id="l:46" class="idref" href="#l:46"><span class="id" title="binder">l</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Triq.equivalence.LanguagesString0.html#p_str:45"><span class="id" title="variable">p_str</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#get_simulated_program"><span class="id" title="definition">get_simulated_program</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#p_nat:44"><span class="id" title="variable">p_nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Triq.nat_lang.NatLang.html#get_labeled_instr"><span class="id" title="definition">NatLang.get_labeled_instr</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#p_nat:44"><span class="id" title="variable">p_nat</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#l:46"><span class="id" title="variable">l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Triq.string_lang.StringLang.html#get_labeled_instr"><span class="id" title="definition">StringLang.get_labeled_instr</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#p_str:45"><span class="id" title="variable">p_str</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#l:46"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p_nat</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">t</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">p_str</span> <span class="id" title="var">l</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hsim</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hsim</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.nat_lang.NatLang.html#get_labeled_instr"><span class="id" title="definition">NatLang.get_labeled_instr</span></a>, <a class="idref" href="Triq.string_lang.StringLang.html#get_labeled_instr"><span class="id" title="definition">StringLang.get_labeled_instr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Triq.equivalence.LanguagesString0.html#eq_inst_label_nat_str"><span class="id" title="lemma">eq_inst_label_nat_str</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Triq.nat_lang.NatLang.html#eq_inst_label"><span class="id" title="definition">NatLang.eq_inst_label</span></a> <span class="id" title="var">h</span> <span class="id" title="var">l</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">HL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="var">remember</span> (<a class="idref" href="Triq.equivalence.LanguagesString0.html#get_simulated_program"><span class="id" title="definition">get_simulated_program</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">IH</span> <span class="id" title="var">l0</span> <span class="id" title="var">l</span>). <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">H</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.nat_lang.NatLang.html#get_labeled_instr"><span class="id" title="definition">NatLang.get_labeled_instr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.string_lang.StringLang.html#get_labeled_instr"><span class="id" title="definition">StringLang.get_labeled_instr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab4"></a><h1 class="section">Executar uma Instrução e a Macro mantém as propriedades</h1>

<div class="paragraph"> </div>

<a id="lab5"></a><h2 class="section">x &lt;- x + 1</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="incr_state_equiv" class="idref" href="#incr_state_equiv"><span class="id" title="lemma">incr_state_equiv</span></a>: <span class="id" title="keyword">∀</span> <a id="s:47" class="idref" href="#s:47"><span class="id" title="binder">s</span></a> <a id="s':48" class="idref" href="#s':48"><span class="id" title="binder">s'</span></a> <a id="v:49" class="idref" href="#v:49"><span class="id" title="binder">v</span></a>, <br/>
&nbsp;&nbsp;<a class="idref" href="Triq.equivalence.LanguagesString0.html#state_equiv"><span class="id" title="definition">state_equiv</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#s:47"><span class="id" title="variable">s</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#s':48"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Triq.equivalence.LanguagesString0.html#state_equiv"><span class="id" title="definition">state_equiv</span></a> (<a class="idref" href="Triq.nat_lang.NatLang.html#incr"><span class="id" title="definition">NatLang.incr</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#s:47"><span class="id" title="variable">s</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#v:49"><span class="id" title="variable">v</span></a>) (<a class="idref" href="Triq.string_lang.StringLang.html#append"><span class="id" title="definition">StringLang.append</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#zero_prf"><span class="id" title="definition">zero_prf</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#s':48"><span class="id" title="variable">s'</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#v:49"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#state_equiv"><span class="id" title="definition">state_equiv</span></a>, <a class="idref" href="Triq.nat_lang.NatLang.html#incr"><span class="id" title="definition">NatLang.incr</span></a>, <a class="idref" href="Triq.string_lang.StringLang.html#append"><span class="id" title="definition">StringLang.append</span></a>, <a class="idref" href="Triq.nat_lang.NatLang.html#update"><span class="id" title="definition">NatLang.update</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Triq.string_lang.StringLang.html#update"><span class="id" title="definition">StringLang.update</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">v0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Triq.common.LanguagesCommon.html#eqb_var"><span class="id" title="definition">eqb_var</span></a> <span class="id" title="var">v</span> <span class="id" title="var">x</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">PeanoNat.Nat.add_comm</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#incr_string0"><span class="id" title="definition">incr_string0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#state_equiv"><span class="id" title="definition">state_equiv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab6"></a><h2 class="section">x &lt;- x - 1</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="remove_last_equiv" class="idref" href="#remove_last_equiv"><span class="id" title="lemma">remove_last_equiv</span></a>: <span class="id" title="keyword">∀</span> <a id="n:50" class="idref" href="#n:50"><span class="id" title="binder">n</span></a>, <span class="id" title="definition">removelast</span> (<a class="idref" href="Triq.equivalence.LanguagesString0.html#nat_to_string0"><span class="id" title="definition">nat_to_string0</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#n:50"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="Triq.equivalence.LanguagesString0.html#nat_to_string0"><span class="id" title="definition">nat_to_string0</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#n:50"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHn</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="decr_state_equiv" class="idref" href="#decr_state_equiv"><span class="id" title="lemma">decr_state_equiv</span></a>: <span class="id" title="keyword">∀</span> <a id="s:51" class="idref" href="#s:51"><span class="id" title="binder">s</span></a> <a id="s':52" class="idref" href="#s':52"><span class="id" title="binder">s'</span></a> <a id="v:53" class="idref" href="#v:53"><span class="id" title="binder">v</span></a>, <br/>
&nbsp;&nbsp;<a class="idref" href="Triq.equivalence.LanguagesString0.html#state_equiv"><span class="id" title="definition">state_equiv</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#s:51"><span class="id" title="variable">s</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#s':52"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Triq.equivalence.LanguagesString0.html#state_equiv"><span class="id" title="definition">state_equiv</span></a> (<a class="idref" href="Triq.nat_lang.NatLang.html#decr"><span class="id" title="definition">NatLang.decr</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#s:51"><span class="id" title="variable">s</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#v:53"><span class="id" title="variable">v</span></a>) (<a class="idref" href="Triq.string_lang.StringLang.html#del"><span class="id" title="definition">StringLang.del</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#s':52"><span class="id" title="variable">s'</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#v:53"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#state_equiv"><span class="id" title="definition">state_equiv</span></a>, <a class="idref" href="Triq.nat_lang.NatLang.html#decr"><span class="id" title="definition">NatLang.decr</span></a>, <a class="idref" href="Triq.string_lang.StringLang.html#del"><span class="id" title="definition">StringLang.del</span></a>, <a class="idref" href="Triq.nat_lang.NatLang.html#update"><span class="id" title="definition">NatLang.update</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Triq.string_lang.StringLang.html#update"><span class="id" title="definition">StringLang.update</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">v0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Triq.common.LanguagesCommon.html#eqb_var"><span class="id" title="definition">eqb_var</span></a> <span class="id" title="var">v</span> <span class="id" title="var">x</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">s</span> <span class="id" title="var">v</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">sv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#state_equiv"><span class="id" title="definition">state_equiv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">H</span> <span class="id" title="var">v</span> <span class="id" title="notation">[]</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">sv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">H0</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>). <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hempty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hempty</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#state_equiv"><span class="id" title="definition">state_equiv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">remember</span> (<a class="idref" href="Triq.equivalence.LanguagesString0.html#nat_to_string0"><span class="id" title="definition">nat_to_string0</span></a> (<span class="id" title="var">s</span> <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">H</span> <span class="id" title="var">v</span> <span class="id" title="var">l</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heql</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">H0</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">sv</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">PeanoNat.Nat.sub_0_r</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#remove_last_equiv"><span class="id" title="lemma">remove_last_equiv</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#state_equiv"><span class="id" title="definition">state_equiv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>, <span class="id" title="var">H0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab7"></a><h2 class="section">if x != 0 goto l</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ends_with_Sn_true" class="idref" href="#ends_with_Sn_true"><span class="id" title="lemma">ends_with_Sn_true</span></a>: <span class="id" title="keyword">∀</span> <a id="n:54" class="idref" href="#n:54"><span class="id" title="binder">n</span></a>, <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Triq.string_lang.StringLang.html#ends_with"><span class="id" title="definition">StringLang.ends_with</span></a> (<a class="idref" href="Triq.equivalence.LanguagesString0.html#nat_to_string0"><span class="id" title="definition">nat_to_string0</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#n:54"><span class="id" title="variable">n</span></a>)) <a class="idref" href="Triq.equivalence.LanguagesString0.html#zero_prf"><span class="id" title="definition">zero_prf</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHn</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab8"></a><h1 class="section">Teorema principal</h1>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

    Queremos mostrar que, para qualquer passo nos naturais, existe uma sequência de
    passos no programa de strings em que o estado e as posições serão equivalentes.

<div class="paragraph"> </div>

    Como estamos no caso string0, podemos dizer de imediato que o n em strings é
    exatamente o mesmo do em nat. Assim, façamos indução em n.

<div class="paragraph"> </div>

  *CASO BASE* : n = 0, n' = n = 0.

<div class="paragraph"> </div>

   Como temos zero passos, basta mostrar que a noção de equivalência se aplica ao
   programa no estado inicial, ou seja, com a snap (s, 0) em nat e (s', 0) em string.

<div class="paragraph"> </div>

   Temos que 0 = 0, então são equivalentes em posição, e temos que s' foi obtido pela
   função de obter estados equivalentes (que já foi mostrada correta). Assim, vale para
   n = 0.

<div class="paragraph"> </div>

  *PASSO DA INDUÇÃO* : Suponha que vale para n, vamos mostrar que vale para S n.

<div class="paragraph"> </div>

   Seja (s, k) a snapshot do programa nos naturais após as execução dos n passos e 
   seja (s', k') a snapshot do programa de strings após n passos. Temos, pela HI, que
   s é equivalente à s' e k é igual à k'.

<div class="paragraph"> </div>

   Para mostrar que vale para (S n), precisamos executar um passo em cada programa e 
   mostrar que as propriedades se mantém. 

<div class="paragraph"> </div>

   Seja instr a k-ésima instrução de k (a próxima a ser executada). Temos três casos

<div class="paragraph"> </div>

<ul class="doclist">
<li> instr = x &lt;- x + 1

</li>
<li> instr = x &lt;- x - 1

</li>
<li> instr = IF X != 0 GOTO L

</li>
</ul>

<div class="paragraph"> </div>

   Como o programa em strings simula o programa dos naturais, temos que a k-ésima
   instrução em p_str é justamente a macro da instrução em p_nat. Assim, basta
   executar a instrução em p_nat e em p_str e observar que tanto o estado como
   as posições são mantidas. Para os dois primeiros casos, basta mostrar a 
   equivalência das operações no estado e observar que teremos (k + 1) e (k + 1)
   como próxima instrução de cada programa (equivalentes). 

<div class="paragraph"> </div>

   Para o caso do IF. veja que, o estado sempre se mantem e a posição também, já
   que a posição da primeira instrução com a label em p_str é a mesma da nos nat.
   E se não pular para a label, os dois seguem em frente (k + 1) = (k + 1) 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a id="nat_implies_string" class="idref" href="#nat_implies_string"><span class="id" title="lemma">nat_implies_string</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="p_nat:55" class="idref" href="#p_nat:55"><span class="id" title="binder">p_nat</span></a> : <a class="idref" href="Triq.nat_lang.NatLang.html#program"><span class="id" title="definition">NatLang.program</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="state_nat:56" class="idref" href="#state_nat:56"><span class="id" title="binder">state_nat</span></a> : <a class="idref" href="Triq.nat_lang.NatLang.html#state"><span class="id" title="definition">NatLang.state</span></a>),<br/>
<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="p_str:57" class="idref" href="#p_str:57"><span class="id" title="binder">p_str</span></a> : <a class="idref" href="Triq.string_lang.StringLang.html#program"><span class="id" title="definition">StringLang.program</span></a> 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="state_str:58" class="idref" href="#state_str:58"><span class="id" title="binder">state_str</span></a> : <a class="idref" href="Triq.string_lang.StringLang.html#state"><span class="id" title="definition">StringLang.state</span></a> 0<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="n:59" class="idref" href="#n:59"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="n':60" class="idref" href="#n':60"><span class="id" title="binder">n'</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Triq.equivalence.LanguagesString0.html#prog_equiv"><span class="id" title="definition">prog_equiv</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#p_nat:55"><span class="id" title="variable">p_nat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Triq.nat_lang.NatLang.html#compute_program"><span class="id" title="definition">NatLang.compute_program</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#p_nat:55"><span class="id" title="variable">p_nat</span></a> (<a class="idref" href="Triq.nat_lang.NatLang.html#SNAP"><span class="id" title="constructor">NatLang.SNAP</span></a> 0 <a class="idref" href="Triq.equivalence.LanguagesString0.html#state_nat:56"><span class="id" title="variable">state_nat</span></a>) <a class="idref" href="Triq.equivalence.LanguagesString0.html#n:59"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Triq.equivalence.LanguagesString0.html#p_str:57"><span class="id" title="variable">p_str</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Triq.string_lang.StringLang.html#compute_program"><span class="id" title="definition">StringLang.compute_program</span></a> <a class="idref" href="Triq.equivalence.LanguagesString0.html#p_str:57"><span class="id" title="variable">p_str</span></a> (<a class="idref" href="Triq.string_lang.StringLang.html#SNAP"><span class="id" title="constructor">StringLang.SNAP</span></a> 0 <a class="idref" href="Triq.equivalence.LanguagesString0.html#state_str:58"><span class="id" title="variable">state_str</span></a>) <a class="idref" href="Triq.equivalence.LanguagesString0.html#n':60"><span class="id" title="variable">n'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p_nat</span> <span class="id" title="var">state_nat</span>. <span class="id" title="tactic">∃</span> (<a class="idref" href="Triq.equivalence.LanguagesString0.html#get_simulated_program"><span class="id" title="definition">get_simulated_program</span></a> <span class="id" title="var">p_nat</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="Triq.equivalence.LanguagesString0.html#get_equiv_state"><span class="id" title="definition">get_equiv_state</span></a> <span class="id" title="var">state_nat</span>). <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="Triq.equivalence.LanguagesString0.html#get_simulated_program"><span class="id" title="definition">get_simulated_program</span></a> <span class="id" title="var">p_nat</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">p_str</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#get_equiv_state_correct"><span class="id" title="lemma">get_equiv_state_correct</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">p_nat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="Triq.nat_lang.NatLang.html#compute_program"><span class="id" title="definition">NatLang.compute_program</span></a> <span class="id" title="var">p_nat</span> (<a class="idref" href="Triq.nat_lang.NatLang.html#SNAP"><span class="id" title="constructor">NatLang.SNAP</span></a> 0 <span class="id" title="var">state_nat</span>) <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">k</span> <span class="id" title="var">s</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">snap_nat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Triq.string_lang.StringLang.html#compute_program"><span class="id" title="definition">StringLang.compute_program</span></a> <span class="id" title="var">p_str</span> (<a class="idref" href="Triq.string_lang.StringLang.html#SNAP"><span class="id" title="constructor">StringLang.SNAP</span></a> 0 <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Triq.equivalence.LanguagesString0.html#get_equiv_state"><span class="id" title="definition">get_equiv_state</span></a> <span class="id" title="var">state_nat</span>)) <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">k'</span> <span class="id" title="var">s'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">snap_str</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#equiv_pos"><span class="id" title="definition">equiv_pos</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">nth_error</span> <span class="id" title="var">p_nat</span> <span class="id" title="var">k</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#nat_nth_implies_string"><span class="id" title="lemma">nat_nth_implies_string</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span> <span class="id" title="keyword">as</span> <span class="id" title="var">E1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#prog_equiv"><span class="id" title="definition">prog_equiv</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">snap_nat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.nat_lang.NatLang.html#next_step"><span class="id" title="definition">NatLang.next_step</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">snap_str</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.string_lang.StringLang.html#next_step"><span class="id" title="definition">StringLang.next_step</span></a>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqp_str</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E1</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">opt_lbl</span> <span class="id" title="var">statement</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">statement</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#incr_state_equiv"><span class="id" title="lemma">incr_state_equiv</span></a>, <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#decr_state_equiv"><span class="id" title="lemma">decr_state_equiv</span></a>, <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">s</span> <span class="id" title="var">v</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">sv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#state_equiv"><span class="id" title="definition">state_equiv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">[]</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">sv</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#state_equiv"><span class="id" title="definition">state_equiv</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#state_equiv"><span class="id" title="definition">state_equiv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="Triq.equivalence.LanguagesString0.html#nat_to_string0"><span class="id" title="definition">nat_to_string0</span></a> (<span class="id" title="var">s</span> <span class="id" title="var">v</span>)). <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">H</span> <span class="id" title="var">v</span> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heql</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">H0</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>, <span class="id" title="var">sv</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#ends_with_Sn_true"><span class="id" title="lemma">ends_with_Sn_true</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#state_equiv"><span class="id" title="definition">state_equiv</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#equiv_pos"><span class="id" title="definition">equiv_pos</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#label_equal_nat_str"><span class="id" title="lemma">label_equal_nat_str</span></a>, <span class="id" title="var">Heqp_str</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#nat_nth_implies_string_none"><span class="id" title="lemma">nat_nth_implies_string_none</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span> <span class="id" title="keyword">as</span> <span class="id" title="var">E1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">snap_str</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">snap_nat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.nat_lang.NatLang.html#next_step"><span class="id" title="definition">NatLang.next_step</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Triq.string_lang.StringLang.html#next_step"><span class="id" title="definition">StringLang.next_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span>, <span class="id" title="var">Heqp_str</span>, <span class="id" title="var">E1</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="keyword">Assumptions</span> <a class="idref" href="Triq.equivalence.LanguagesString0.html#nat_implies_string"><span class="id" title="lemma">nat_implies_string</span></a>.<br/>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>